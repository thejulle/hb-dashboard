<script setup>
import PatientHeader from "./PatientHeader.vue";

defineProps({
  activePatient: {
    type: Object,
    required: true,
  },
});
</script>
<script>
import Plotly from 'plotly.js-dist-min';

export default {
  mounted () {
    if (this.$refs.plot) {
      this.createPlot();
    }
  },
  updated() {
    if (this.$refs.plot) {
      this.createPlot();
    }
  },
  methods: {
    createPlot() {
      const data = {
        "id": "overall-graph",
        "config": {
          "displayModeBar": false,
          "displaylogo": false
        },
        "figure": {
          "data": [{
            "hovertemplate": "Glucose value : %{y:.1f} mmol/L<extra></extra>",
            "marker": {
              "color": "#0064FF",
              "size": 5
            },
            "mode": "markers",
            "showlegend": false,
            "x": ["2022-10-06T23:56:05+03:00", "2022-10-06T23:51:05+03:00", "2022-10-06T23:46:05+03:00", "2022-10-06T23:41:05+03:00", "2022-10-06T23:36:05+03:00", "2022-10-06T23:31:05+03:00", "2022-10-06T23:26:05+03:00", "2022-10-06T23:21:05+03:00", "2022-10-06T23:16:05+03:00", "2022-10-06T23:11:05+03:00", "2022-10-06T23:06:05+03:00", "2022-10-06T23:01:04+03:00", "2022-10-06T22:56:05+03:00", "2022-10-06T22:51:05+03:00", "2022-10-06T22:46:05+03:00", "2022-10-06T22:41:05+03:00", "2022-10-06T22:36:05+03:00", "2022-10-06T22:31:05+03:00", "2022-10-06T22:26:05+03:00", "2022-10-06T22:21:05+03:00", "2022-10-06T22:16:05+03:00", "2022-10-06T22:11:05+03:00", "2022-10-06T22:06:05+03:00", "2022-10-06T22:01:04+03:00", "2022-10-06T21:56:04+03:00", "2022-10-06T21:51:04+03:00", "2022-10-06T21:46:04+03:00", "2022-10-06T21:41:05+03:00", "2022-10-06T21:36:04+03:00", "2022-10-06T21:31:05+03:00", "2022-10-06T21:26:05+03:00", "2022-10-06T21:21:04+03:00", "2022-10-06T21:16:05+03:00", "2022-10-06T21:11:05+03:00", "2022-10-06T21:06:04+03:00", "2022-10-06T21:01:04+03:00", "2022-10-06T20:56:04+03:00", "2022-10-06T20:51:04+03:00", "2022-10-06T20:46:05+03:00", "2022-10-06T20:41:04+03:00", "2022-10-06T20:36:04+03:00", "2022-10-06T20:31:04+03:00", "2022-10-06T20:26:04+03:00", "2022-10-06T20:21:04+03:00", "2022-10-06T20:16:04+03:00", "2022-10-06T20:11:04+03:00", "2022-10-06T20:06:04+03:00", "2022-10-06T20:01:05+03:00", "2022-10-06T19:56:05+03:00", "2022-10-06T19:51:04+03:00", "2022-10-06T19:46:04+03:00", "2022-10-06T19:41:04+03:00", "2022-10-06T19:36:04+03:00", "2022-10-06T19:31:04+03:00", "2022-10-06T19:26:04+03:00", "2022-10-06T19:21:04+03:00", "2022-10-06T19:16:04+03:00", "2022-10-06T19:11:04+03:00", "2022-10-06T19:06:04+03:00", "2022-10-06T19:01:04+03:00", "2022-10-06T18:56:04+03:00", "2022-10-06T18:51:04+03:00", "2022-10-06T18:46:04+03:00", "2022-10-06T18:41:04+03:00", "2022-10-06T18:36:04+03:00", "2022-10-06T18:31:04+03:00", "2022-10-06T18:26:04+03:00", "2022-10-06T18:21:04+03:00", "2022-10-06T18:16:04+03:00", "2022-10-06T18:11:04+03:00", "2022-10-06T18:06:04+03:00", "2022-10-06T18:01:04+03:00", "2022-10-06T17:56:04+03:00", "2022-10-06T17:51:04+03:00", "2022-10-06T17:46:04+03:00", "2022-10-06T17:41:04+03:00", "2022-10-06T17:36:04+03:00", "2022-10-06T17:31:04+03:00", "2022-10-06T17:26:04+03:00", "2022-10-06T17:21:04+03:00", "2022-10-06T17:16:04+03:00", "2022-10-06T17:11:04+03:00", "2022-10-06T17:06:04+03:00", "2022-10-06T17:01:04+03:00", "2022-10-06T16:56:04+03:00", "2022-10-06T16:51:04+03:00", "2022-10-06T16:46:04+03:00", "2022-10-06T16:41:04+03:00", "2022-10-06T16:36:04+03:00", "2022-10-06T16:31:04+03:00", "2022-10-06T16:26:04+03:00", "2022-10-06T16:21:04+03:00", "2022-10-06T16:16:04+03:00", "2022-10-06T16:11:04+03:00", "2022-10-06T16:06:04+03:00", "2022-10-06T16:01:04+03:00", "2022-10-06T15:56:04+03:00", "2022-10-06T15:51:04+03:00", "2022-10-06T15:46:03+03:00", "2022-10-06T15:41:04+03:00", "2022-10-06T15:36:04+03:00", "2022-10-06T15:31:04+03:00", "2022-10-06T15:26:04+03:00", "2022-10-06T15:21:04+03:00", "2022-10-06T15:16:04+03:00", "2022-10-06T15:11:03+03:00", "2022-10-06T15:06:04+03:00", "2022-10-06T15:01:04+03:00", "2022-10-06T14:56:04+03:00", "2022-10-06T14:51:04+03:00", "2022-10-06T14:46:04+03:00", "2022-10-06T14:41:04+03:00", "2022-10-06T14:36:04+03:00", "2022-10-06T14:31:03+03:00", "2022-10-06T14:26:04+03:00", "2022-10-06T14:21:04+03:00", "2022-10-06T14:16:04+03:00", "2022-10-06T14:11:03+03:00", "2022-10-06T14:06:03+03:00", "2022-10-06T14:01:03+03:00", "2022-10-06T13:56:03+03:00", "2022-10-06T13:51:03+03:00", "2022-10-06T13:46:03+03:00", "2022-10-06T13:41:04+03:00", "2022-10-06T13:36:04+03:00", "2022-10-06T13:31:04+03:00", "2022-10-06T13:26:04+03:00", "2022-10-06T13:21:03+03:00", "2022-10-06T13:16:03+03:00", "2022-10-06T13:11:03+03:00", "2022-10-06T13:06:03+03:00", "2022-10-06T13:01:03+03:00", "2022-10-06T12:56:04+03:00", "2022-10-06T12:51:03+03:00", "2022-10-06T12:46:04+03:00", "2022-10-06T12:41:03+03:00", "2022-10-06T12:36:03+03:00", "2022-10-06T12:31:03+03:00", "2022-10-06T12:26:03+03:00", "2022-10-06T12:21:03+03:00", "2022-10-06T12:16:03+03:00", "2022-10-06T12:11:04+03:00", "2022-10-06T12:06:04+03:00", "2022-10-06T12:01:04+03:00", "2022-10-06T11:56:03+03:00", "2022-10-06T11:51:03+03:00", "2022-10-06T11:46:03+03:00", "2022-10-06T11:41:03+03:00", "2022-10-06T11:36:04+03:00", "2022-10-06T11:31:04+03:00", "2022-10-06T11:26:04+03:00", "2022-10-06T11:21:04+03:00", "2022-10-06T11:16:04+03:00", "2022-10-06T11:11:04+03:00", "2022-10-06T11:06:04+03:00", "2022-10-06T11:01:03+03:00", "2022-10-06T10:56:03+03:00", "2022-10-06T10:51:03+03:00", "2022-10-06T10:46:03+03:00", "2022-10-06T10:41:03+03:00", "2022-10-06T10:36:03+03:00", "2022-10-06T10:31:03+03:00", "2022-10-06T10:26:03+03:00", "2022-10-06T10:21:03+03:00", "2022-10-06T10:16:03+03:00", "2022-10-06T10:11:03+03:00", "2022-10-06T10:06:03+03:00", "2022-10-06T10:01:03+03:00", "2022-10-06T09:56:03+03:00", "2022-10-06T09:51:03+03:00", "2022-10-06T09:46:03+03:00", "2022-10-06T09:41:03+03:00", "2022-10-06T09:36:03+03:00", "2022-10-06T09:31:03+03:00", "2022-10-06T09:26:03+03:00", "2022-10-06T09:21:03+03:00", "2022-10-06T09:16:03+03:00", "2022-10-06T09:11:03+03:00", "2022-10-06T09:06:03+03:00", "2022-10-06T09:01:03+03:00", "2022-10-06T08:56:03+03:00", "2022-10-06T08:51:03+03:00", "2022-10-06T08:46:03+03:00", "2022-10-06T08:41:03+03:00", "2022-10-06T08:36:03+03:00", "2022-10-06T08:31:03+03:00", "2022-10-06T08:26:03+03:00", "2022-10-06T08:21:03+03:00", "2022-10-06T08:16:03+03:00", "2022-10-06T08:11:03+03:00", "2022-10-06T08:06:03+03:00", "2022-10-06T08:01:03+03:00", "2022-10-06T07:56:03+03:00", "2022-10-06T07:51:03+03:00", "2022-10-06T07:46:03+03:00", "2022-10-06T07:41:02+03:00", "2022-10-06T07:36:03+03:00", "2022-10-06T07:31:03+03:00", "2022-10-06T07:26:03+03:00", "2022-10-06T07:21:03+03:00", "2022-10-06T07:16:02+03:00", "2022-10-06T07:11:03+03:00", "2022-10-06T07:06:03+03:00", "2022-10-06T07:01:03+03:00", "2022-10-06T06:56:03+03:00", "2022-10-06T06:51:03+03:00", "2022-10-06T06:46:02+03:00", "2022-10-06T06:41:03+03:00", "2022-10-06T06:36:03+03:00", "2022-10-06T06:31:02+03:00", "2022-10-06T06:26:03+03:00", "2022-10-06T06:21:02+03:00", "2022-10-06T06:16:02+03:00", "2022-10-06T06:11:03+03:00", "2022-10-06T06:06:02+03:00", "2022-10-06T06:01:03+03:00", "2022-10-06T05:56:04+03:00", "2022-10-06T05:51:04+03:00", "2022-10-06T05:46:03+03:00", "2022-10-06T05:41:03+03:00", "2022-10-06T05:36:03+03:00", "2022-10-06T05:31:04+03:00", "2022-10-06T05:26:03+03:00", "2022-10-06T05:21:03+03:00", "2022-10-06T05:16:03+03:00", "2022-10-06T05:11:04+03:00", "2022-10-06T05:06:04+03:00", "2022-10-06T05:01:04+03:00", "2022-10-06T04:56:03+03:00", "2022-10-06T04:51:04+03:00", "2022-10-06T04:46:03+03:00", "2022-10-06T04:41:03+03:00", "2022-10-06T04:36:04+03:00", "2022-10-06T04:31:03+03:00", "2022-10-06T04:26:03+03:00", "2022-10-06T04:21:03+03:00", "2022-10-06T04:16:03+03:00", "2022-10-06T04:11:03+03:00", "2022-10-06T04:06:03+03:00", "2022-10-06T04:01:03+03:00", "2022-10-06T03:56:03+03:00", "2022-10-06T03:51:03+03:00", "2022-10-06T03:46:03+03:00", "2022-10-06T03:41:03+03:00", "2022-10-06T03:36:03+03:00", "2022-10-06T03:31:03+03:00", "2022-10-06T03:26:04+03:00", "2022-10-06T03:21:04+03:00", "2022-10-06T03:16:03+03:00", "2022-10-06T03:11:03+03:00", "2022-10-06T03:06:03+03:00", "2022-10-06T03:01:03+03:00", "2022-10-06T02:56:03+03:00", "2022-10-06T02:51:03+03:00", "2022-10-06T02:46:03+03:00", "2022-10-06T02:41:04+03:00", "2022-10-06T02:36:03+03:00", "2022-10-06T02:31:03+03:00", "2022-10-06T02:26:03+03:00", "2022-10-06T02:21:03+03:00", "2022-10-06T02:16:03+03:00", "2022-10-06T02:11:03+03:00", "2022-10-06T02:06:03+03:00", "2022-10-06T02:01:03+03:00", "2022-10-06T01:56:03+03:00", "2022-10-06T01:51:03+03:00", "2022-10-06T01:46:03+03:00", "2022-10-06T01:41:03+03:00", "2022-10-06T01:36:03+03:00", "2022-10-06T01:31:03+03:00", "2022-10-06T01:26:03+03:00", "2022-10-06T01:21:03+03:00", "2022-10-06T01:16:03+03:00", "2022-10-06T01:11:03+03:00", "2022-10-06T01:06:03+03:00", "2022-10-06T01:01:03+03:00", "2022-10-06T00:56:03+03:00", "2022-10-06T00:51:02+03:00", "2022-10-06T00:46:02+03:00", "2022-10-06T00:41:03+03:00", "2022-10-06T00:36:02+03:00", "2022-10-06T00:31:02+03:00", "2022-10-06T00:26:03+03:00", "2022-10-06T00:21:03+03:00", "2022-10-06T00:16:03+03:00", "2022-10-06T00:11:03+03:00", "2022-10-06T00:06:03+03:00", "2022-10-06T00:01:03+03:00"],
            "y": [6.0, 5.666666666666667, 5.611111111111111, 5.388888888888889, 5.388888888888889, 5.5, 5.444444444444445, 5.111111111111111, 5.333333333333333, 4.888888888888889, 4.666666666666667, 4.611111111111111, 4.666666666666667, 4.722222222222222, 4.777777777777778, 5.0, 5.166666666666667, 5.055555555555555, 5.222222222222222, 5.5, 5.333333333333333, 5.555555555555555, 5.611111111111111, 5.777777777777778, 6.055555555555555, 6.166666666666667, 5.777777777777778, 5.333333333333333, 4.611111111111111, 4.555555555555555, 5.166666666666667, 5.277777777777778, 4.388888888888889, 4.0, 4.111111111111111, 4.277777777777778, 4.333333333333333, 4.277777777777778, 4.166666666666667, 3.888888888888889, 3.8333333333333335, 3.7222222222222223, 3.611111111111111, 3.611111111111111, 3.7222222222222223, 3.9444444444444446, 4.111111111111111, 4.277777777777778, 4.555555555555555, 5.111111111111111, 6.0, 6.666666666666667, 7.222222222222222, 7.666666666666667, 7.388888888888889, 6.888888888888889, 6.833333333333333, 6.944444444444445, 7.111111111111111, 7.222222222222222, 7.555555555555555, 7.555555555555555, 7.777777777777778, 7.833333333333333, 7.833333333333333, 7.333333333333333, 7.277777777777778, 6.722222222222222, 5.722222222222222, 5.388888888888889, 4.444444444444445, 4.277777777777778, 4.222222222222222, 4.0, 3.7222222222222223, 3.8333333333333335, 4.222222222222222, 4.5, 4.555555555555555, 4.666666666666667, 4.333333333333333, 4.222222222222222, 4.222222222222222, 4.722222222222222, 4.944444444444445, 5.5, 5.777777777777778, 5.611111111111111, 5.5, 5.388888888888889, 5.166666666666667, 5.055555555555555, 5.166666666666667, 5.444444444444445, 5.5, 4.722222222222222, 4.277777777777778, 4.444444444444445, 5.0, 5.388888888888889, 5.666666666666667, 6.166666666666667, 6.444444444444445, 6.333333333333333, 6.222222222222222, 6.055555555555555, 5.944444444444445, 5.888888888888889, 5.944444444444445, 6.277777777777778, 6.5, 6.444444444444445, 6.222222222222222, 5.944444444444445, 5.944444444444445, 5.833333333333333, 5.666666666666667, 5.611111111111111, 5.833333333333333, 6.0, 5.833333333333333, 5.722222222222222, 5.833333333333333, 5.666666666666667, 6.0, 6.555555555555555, 6.777777777777778, 6.944444444444445, 7.222222222222222, 7.444444444444445, 7.944444444444445, 8.0, 8.166666666666666, 7.666666666666667, 7.0, 6.444444444444445, 5.944444444444445, 5.666666666666667, 5.555555555555555, 5.444444444444445, 5.388888888888889, 5.333333333333333, 5.388888888888889, 5.555555555555555, 5.722222222222222, 5.777777777777778, 5.777777777777778, 5.777777777777778, 6.0, 5.944444444444445, 5.833333333333333, 5.833333333333333, 5.777777777777778, 5.722222222222222, 5.888888888888889, 5.777777777777778, 5.722222222222222, 5.666666666666667, 5.666666666666667, 5.611111111111111, 5.611111111111111, 5.555555555555555, 5.5, 5.5, 5.5, 5.555555555555555, 5.555555555555555, 5.611111111111111, 5.555555555555555, 5.555555555555555, 5.555555555555555, 5.611111111111111, 5.611111111111111, 5.5, 5.333333333333333, 5.388888888888889, 5.555555555555555, 5.722222222222222, 5.888888888888889, 5.722222222222222, 5.555555555555555, 5.388888888888889, 5.333333333333333, 5.333333333333333, 5.444444444444445, 5.611111111111111, 5.888888888888889, 6.055555555555555, 6.166666666666667, 6.222222222222222, 6.055555555555555, 6.111111111111111, 6.055555555555555, 5.833333333333333, 5.333333333333333, 5.111111111111111, 5.0, 5.0, 4.944444444444445, 4.722222222222222, 4.5, 4.277777777777778, 4.388888888888889, 4.833333333333333, 5.777777777777778, 6.111111111111111, 6.055555555555555, 5.888888888888889, 5.5, 5.722222222222222, 5.833333333333333, 5.555555555555555, 5.611111111111111, 5.5, 5.277777777777778, 5.0, 4.944444444444445, 5.611111111111111, 5.722222222222222, 5.722222222222222, 5.611111111111111, 4.944444444444445, 5.444444444444445, 6.166666666666667, 6.5, 6.166666666666667, 5.944444444444445, 5.888888888888889, 5.888888888888889, 5.833333333333333, 5.777777777777778, 5.777777777777778, 5.777777777777778, 5.777777777777778, 5.777777777777778, 5.777777777777778, 5.611111111111111, 5.833333333333333, 6.555555555555555, 6.5, 6.5, 6.611111111111111, 6.722222222222222, 6.666666666666667, 6.388888888888889, 5.055555555555555, 4.833333333333333, 5.611111111111111, 5.444444444444445, 5.444444444444445, 5.277777777777778, 4.777777777777778, 5.111111111111111, 6.055555555555555, 6.111111111111111, 6.055555555555555, 6.111111111111111, 6.222222222222222, 6.444444444444445, 5.666666666666667, 5.166666666666667, 4.5, 4.5, 4.444444444444445, 4.333333333333333, 4.611111111111111, 4.888888888888889, 5.055555555555555, 5.222222222222222, 5.5, 5.666666666666667, 6.0, 6.222222222222222, 6.333333333333333, 6.388888888888889, 6.833333333333333, 7.111111111111111, 7.444444444444445, 7.555555555555555, 7.555555555555555, 7.277777777777778, 6.833333333333333, 6.833333333333333, 6.222222222222222, 6.666666666666667, 6.888888888888889, 6.611111111111111, 6.888888888888889],
            "yaxis": "y",
            "type": "scatter"
          }, {
            "customdata": [
              [5],
              [5]
            ],
            "hovertemplate": "Fast-acting dose : %{customdata[0]} U<extra></extra>",
            "marker": {
              "color": "#27865E",
              "size": 24
            },
            "mode": "markers",
            "x": ["2022-10-06T08:00:00+03:00", "2022-10-06T12:00:00+03:00"],
            "y": [6.21111111111111, 5.655555555555555],
            "yaxis": "y",
            "type": "scatter"
          }, {
            "customdata": [
              [9],
              [8]
            ],
            "hovertemplate": "Long-acting dose : %{customdata[0]} U<extra></extra>",
            "marker": {
              "color": "#E50051",
              "size": 24
            },
            "mode": "markers",
            "x": ["2022-10-06T07:40:00+03:00", "2022-10-06T11:40:00+03:00"],
            "y": [5.21111111111111, 5.877777777777777],
            "yaxis": "y",
            "type": "scatter"
          }, {
            "customdata": [
              [
                [3.0]
              ],
              [
                [1.0]
              ],
              [
                [3.0]
              ],
              [
                [4.0]
              ],
              [
                [3.0]
              ],
              [
                [3.0]
              ],
              [
                [3.0]
              ],
              [
                [4.0]
              ],
              [
                [1.0]
              ],
              [
                [4.0]
              ],
              [
                [2.0]
              ],
              [
                [4.0]
              ],
              [
                [3.0]
              ],
              [
                [3.0]
              ],
              [
                [5.0]
              ],
              [
                [3.0]
              ],
              [
                [2.0]
              ],
              [
                [4.0]
              ],
              [
                [1.0]
              ],
              [
                [4.0]
              ],
              [
                [3.0]
              ],
              [
                [2.0]
              ],
              [
                [2.0]
              ],
              [
                [13.0]
              ],
              [
                [4.0]
              ]
            ],
            "hovertemplate": "Activity : %{customdata[0]} cal<extra></extra>",
            "marker": {
              "color": "rgba(0, 100, 255, 0.5)"
            },
            "width": 1020000.0,
            "x": ["2022-10-06T09:20:00+03:00", "2022-10-06T09:40:00+03:00", "2022-10-06T10:00:00+03:00", "2022-10-06T10:20:00+03:00", "2022-10-06T10:40:00+03:00", "2022-10-06T11:00:00+03:00", "2022-10-06T11:20:00+03:00", "2022-10-06T11:40:00+03:00", "2022-10-06T12:00:00+03:00", "2022-10-06T12:20:00+03:00", "2022-10-06T12:40:00+03:00", "2022-10-06T13:00:00+03:00", "2022-10-06T13:20:00+03:00", "2022-10-06T13:40:00+03:00", "2022-10-06T14:00:00+03:00", "2022-10-06T14:20:00+03:00", "2022-10-06T14:40:00+03:00", "2022-10-06T15:00:00+03:00", "2022-10-06T16:20:00+03:00", "2022-10-06T16:40:00+03:00", "2022-10-06T17:00:00+03:00", "2022-10-06T17:20:00+03:00", "2022-10-06T17:40:00+03:00", "2022-10-06T19:40:00+03:00", "2022-10-06T21:00:00+03:00"],
            "y": [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 1.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 0.0, 0.0, 0.0, 2.0, 1.0],
            "yaxis": "y2",
            "type": "bar"
          }],
          "layout": {
            "template": {
              "data": {
                "histogram2dcontour": [{
                  "type": "histogram2dcontour",
                  "colorbar": {
                    "outlinewidth": 0,
                    "ticks": ""
                  },
                  "colorscale": [
                    [0.0, "#0d0887"],
                    [0.1111111111111111, "#46039f"],
                    [0.2222222222222222, "#7201a8"],
                    [0.3333333333333333, "#9c179e"],
                    [0.4444444444444444, "#bd3786"],
                    [0.5555555555555556, "#d8576b"],
                    [0.6666666666666666, "#ed7953"],
                    [0.7777777777777778, "#fb9f3a"],
                    [0.8888888888888888, "#fdca26"],
                    [1.0, "#f0f921"]
                  ]
                }],
                "choropleth": [{
                  "type": "choropleth",
                  "colorbar": {
                    "outlinewidth": 0,
                    "ticks": ""
                  }
                }],
                "histogram2d": [{
                  "type": "histogram2d",
                  "colorbar": {
                    "outlinewidth": 0,
                    "ticks": ""
                  },
                  "colorscale": [
                    [0.0, "#0d0887"],
                    [0.1111111111111111, "#46039f"],
                    [0.2222222222222222, "#7201a8"],
                    [0.3333333333333333, "#9c179e"],
                    [0.4444444444444444, "#bd3786"],
                    [0.5555555555555556, "#d8576b"],
                    [0.6666666666666666, "#ed7953"],
                    [0.7777777777777778, "#fb9f3a"],
                    [0.8888888888888888, "#fdca26"],
                    [1.0, "#f0f921"]
                  ]
                }],
                "heatmap": [{
                  "type": "heatmap",
                  "colorbar": {
                    "outlinewidth": 0,
                    "ticks": ""
                  },
                  "colorscale": [
                    [0.0, "#0d0887"],
                    [0.1111111111111111, "#46039f"],
                    [0.2222222222222222, "#7201a8"],
                    [0.3333333333333333, "#9c179e"],
                    [0.4444444444444444, "#bd3786"],
                    [0.5555555555555556, "#d8576b"],
                    [0.6666666666666666, "#ed7953"],
                    [0.7777777777777778, "#fb9f3a"],
                    [0.8888888888888888, "#fdca26"],
                    [1.0, "#f0f921"]
                  ]
                }],
                "heatmapgl": [{
                  "type": "heatmapgl",
                  "colorbar": {
                    "outlinewidth": 0,
                    "ticks": ""
                  },
                  "colorscale": [
                    [0.0, "#0d0887"],
                    [0.1111111111111111, "#46039f"],
                    [0.2222222222222222, "#7201a8"],
                    [0.3333333333333333, "#9c179e"],
                    [0.4444444444444444, "#bd3786"],
                    [0.5555555555555556, "#d8576b"],
                    [0.6666666666666666, "#ed7953"],
                    [0.7777777777777778, "#fb9f3a"],
                    [0.8888888888888888, "#fdca26"],
                    [1.0, "#f0f921"]
                  ]
                }],
                "contourcarpet": [{
                  "type": "contourcarpet",
                  "colorbar": {
                    "outlinewidth": 0,
                    "ticks": ""
                  }
                }],
                "contour": [{
                  "type": "contour",
                  "colorbar": {
                    "outlinewidth": 0,
                    "ticks": ""
                  },
                  "colorscale": [
                    [0.0, "#0d0887"],
                    [0.1111111111111111, "#46039f"],
                    [0.2222222222222222, "#7201a8"],
                    [0.3333333333333333, "#9c179e"],
                    [0.4444444444444444, "#bd3786"],
                    [0.5555555555555556, "#d8576b"],
                    [0.6666666666666666, "#ed7953"],
                    [0.7777777777777778, "#fb9f3a"],
                    [0.8888888888888888, "#fdca26"],
                    [1.0, "#f0f921"]
                  ]
                }],
                "surface": [{
                  "type": "surface",
                  "colorbar": {
                    "outlinewidth": 0,
                    "ticks": ""
                  },
                  "colorscale": [
                    [0.0, "#0d0887"],
                    [0.1111111111111111, "#46039f"],
                    [0.2222222222222222, "#7201a8"],
                    [0.3333333333333333, "#9c179e"],
                    [0.4444444444444444, "#bd3786"],
                    [0.5555555555555556, "#d8576b"],
                    [0.6666666666666666, "#ed7953"],
                    [0.7777777777777778, "#fb9f3a"],
                    [0.8888888888888888, "#fdca26"],
                    [1.0, "#f0f921"]
                  ]
                }],
                "mesh3d": [{
                  "type": "mesh3d",
                  "colorbar": {
                    "outlinewidth": 0,
                    "ticks": ""
                  }
                }],
                "scatter": [{
                  "fillpattern": {
                    "fillmode": "overlay",
                    "size": 10,
                    "solidity": 0.2
                  },
                  "type": "scatter"
                }],
                "parcoords": [{
                  "type": "parcoords",
                  "line": {
                    "colorbar": {
                      "outlinewidth": 0,
                      "ticks": ""
                    }
                  }
                }],
                "scatterpolargl": [{
                  "type": "scatterpolargl",
                  "marker": {
                    "colorbar": {
                      "outlinewidth": 0,
                      "ticks": ""
                    }
                  }
                }],
                "bar": [{
                  "error_x": {
                    "color": "#2a3f5f"
                  },
                  "error_y": {
                    "color": "#2a3f5f"
                  },
                  "marker": {
                    "line": {
                      "color": "#E5ECF6",
                      "width": 0.5
                    },
                    "pattern": {
                      "fillmode": "overlay",
                      "size": 10,
                      "solidity": 0.2
                    }
                  },
                  "type": "bar"
                }],
                "scattergeo": [{
                  "type": "scattergeo",
                  "marker": {
                    "colorbar": {
                      "outlinewidth": 0,
                      "ticks": ""
                    }
                  }
                }],
                "scatterpolar": [{
                  "type": "scatterpolar",
                  "marker": {
                    "colorbar": {
                      "outlinewidth": 0,
                      "ticks": ""
                    }
                  }
                }],
                "histogram": [{
                  "marker": {
                    "pattern": {
                      "fillmode": "overlay",
                      "size": 10,
                      "solidity": 0.2
                    }
                  },
                  "type": "histogram"
                }],
                "scattergl": [{
                  "type": "scattergl",
                  "marker": {
                    "colorbar": {
                      "outlinewidth": 0,
                      "ticks": ""
                    }
                  }
                }],
                "scatter3d": [{
                  "type": "scatter3d",
                  "line": {
                    "colorbar": {
                      "outlinewidth": 0,
                      "ticks": ""
                    }
                  },
                  "marker": {
                    "colorbar": {
                      "outlinewidth": 0,
                      "ticks": ""
                    }
                  }
                }],
                "scattermapbox": [{
                  "type": "scattermapbox",
                  "marker": {
                    "colorbar": {
                      "outlinewidth": 0,
                      "ticks": ""
                    }
                  }
                }],
                "scatterternary": [{
                  "type": "scatterternary",
                  "marker": {
                    "colorbar": {
                      "outlinewidth": 0,
                      "ticks": ""
                    }
                  }
                }],
                "scattercarpet": [{
                  "type": "scattercarpet",
                  "marker": {
                    "colorbar": {
                      "outlinewidth": 0,
                      "ticks": ""
                    }
                  }
                }],
                "carpet": [{
                  "aaxis": {
                    "endlinecolor": "#2a3f5f",
                    "gridcolor": "white",
                    "linecolor": "white",
                    "minorgridcolor": "white",
                    "startlinecolor": "#2a3f5f"
                  },
                  "baxis": {
                    "endlinecolor": "#2a3f5f",
                    "gridcolor": "white",
                    "linecolor": "white",
                    "minorgridcolor": "white",
                    "startlinecolor": "#2a3f5f"
                  },
                  "type": "carpet"
                }],
                "table": [{
                  "cells": {
                    "fill": {
                      "color": "#EBF0F8"
                    },
                    "line": {
                      "color": "white"
                    }
                  },
                  "header": {
                    "fill": {
                      "color": "#C8D4E3"
                    },
                    "line": {
                      "color": "white"
                    }
                  },
                  "type": "table"
                }],
                "barpolar": [{
                  "marker": {
                    "line": {
                      "color": "#E5ECF6",
                      "width": 0.5
                    },
                    "pattern": {
                      "fillmode": "overlay",
                      "size": 10,
                      "solidity": 0.2
                    }
                  },
                  "type": "barpolar"
                }],
                "pie": [{
                  "automargin": true,
                  "type": "pie"
                }]
              },
              "layout": {
                "autotypenumbers": "strict",
                "colorway": ["#636efa", "#EF553B", "#00cc96", "#ab63fa", "#FFA15A", "#19d3f3", "#FF6692", "#B6E880", "#FF97FF", "#FECB52"],
                "font": {
                  "color": "#2a3f5f"
                },
                "hovermode": "closest",
                "hoverlabel": {
                  "align": "left"
                },
                "paper_bgcolor": "white",
                "plot_bgcolor": "#E5ECF6",
                "polar": {
                  "bgcolor": "#E5ECF6",
                  "angularaxis": {
                    "gridcolor": "white",
                    "linecolor": "white",
                    "ticks": ""
                  },
                  "radialaxis": {
                    "gridcolor": "white",
                    "linecolor": "white",
                    "ticks": ""
                  }
                },
                "ternary": {
                  "bgcolor": "#E5ECF6",
                  "aaxis": {
                    "gridcolor": "white",
                    "linecolor": "white",
                    "ticks": ""
                  },
                  "baxis": {
                    "gridcolor": "white",
                    "linecolor": "white",
                    "ticks": ""
                  },
                  "caxis": {
                    "gridcolor": "white",
                    "linecolor": "white",
                    "ticks": ""
                  }
                },
                "coloraxis": {
                  "colorbar": {
                    "outlinewidth": 0,
                    "ticks": ""
                  }
                },
                "colorscale": {
                  "sequential": [
                    [0.0, "#0d0887"],
                    [0.1111111111111111, "#46039f"],
                    [0.2222222222222222, "#7201a8"],
                    [0.3333333333333333, "#9c179e"],
                    [0.4444444444444444, "#bd3786"],
                    [0.5555555555555556, "#d8576b"],
                    [0.6666666666666666, "#ed7953"],
                    [0.7777777777777778, "#fb9f3a"],
                    [0.8888888888888888, "#fdca26"],
                    [1.0, "#f0f921"]
                  ],
                  "sequentialminus": [
                    [0.0, "#0d0887"],
                    [0.1111111111111111, "#46039f"],
                    [0.2222222222222222, "#7201a8"],
                    [0.3333333333333333, "#9c179e"],
                    [0.4444444444444444, "#bd3786"],
                    [0.5555555555555556, "#d8576b"],
                    [0.6666666666666666, "#ed7953"],
                    [0.7777777777777778, "#fb9f3a"],
                    [0.8888888888888888, "#fdca26"],
                    [1.0, "#f0f921"]
                  ],
                  "diverging": [
                    [0, "#8e0152"],
                    [0.1, "#c51b7d"],
                    [0.2, "#de77ae"],
                    [0.3, "#f1b6da"],
                    [0.4, "#fde0ef"],
                    [0.5, "#f7f7f7"],
                    [0.6, "#e6f5d0"],
                    [0.7, "#b8e186"],
                    [0.8, "#7fbc41"],
                    [0.9, "#4d9221"],
                    [1, "#276419"]
                  ]
                },
                "xaxis": {
                  "gridcolor": "white",
                  "linecolor": "white",
                  "ticks": "",
                  "title": {
                    "standoff": 15
                  },
                  "zerolinecolor": "white",
                  "automargin": true,
                  "zerolinewidth": 2
                },
                "yaxis": {
                  "gridcolor": "white",
                  "linecolor": "white",
                  "ticks": "",
                  "title": {
                    "standoff": 15
                  },
                  "zerolinecolor": "white",
                  "automargin": true,
                  "zerolinewidth": 2
                },
                "scene": {
                  "xaxis": {
                    "backgroundcolor": "#E5ECF6",
                    "gridcolor": "white",
                    "linecolor": "white",
                    "showbackground": true,
                    "ticks": "",
                    "zerolinecolor": "white",
                    "gridwidth": 2
                  },
                  "yaxis": {
                    "backgroundcolor": "#E5ECF6",
                    "gridcolor": "white",
                    "linecolor": "white",
                    "showbackground": true,
                    "ticks": "",
                    "zerolinecolor": "white",
                    "gridwidth": 2
                  },
                  "zaxis": {
                    "backgroundcolor": "#E5ECF6",
                    "gridcolor": "white",
                    "linecolor": "white",
                    "showbackground": true,
                    "ticks": "",
                    "zerolinecolor": "white",
                    "gridwidth": 2
                  }
                },
                "shapedefaults": {
                  "line": {
                    "color": "#2a3f5f"
                  }
                },
                "annotationdefaults": {
                  "arrowcolor": "#2a3f5f",
                  "arrowhead": 0,
                  "arrowwidth": 1
                },
                "geo": {
                  "bgcolor": "white",
                  "landcolor": "#E5ECF6",
                  "subunitcolor": "white",
                  "showland": true,
                  "showlakes": true,
                  "lakecolor": "white"
                },
                "title": {
                  "x": 0.05
                },
                "mapbox": {
                  "style": "light"
                }
              }
            },
            "uniformtext": {
              "minsize": 6,
              "mode": "hide"
            },
            "font": {
              "family": "Inter"
            },
            "margin": {
              "t": 5,
              "b": 5,
              "l": 5,
              "r": 10
            },
            "yaxis": {
              "dtick": 2,
              "gridcolor": "#E4E4E4",
              "title": {
                "text": "mmol/L"
              },
              "fixedrange": true,
              "range": [2.9, 20.1]
            },
            "yaxis2": {
              "matches": "y",
              "tickmode": "array",
              "tickvals": [0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20],
              "ticktext": [0, 15, 30, 45, 60, 75, 90, 105, 120, 135, 150],
              "gridcolor": "#E4E4E4",
              "title": {
                "text": "Calories"
              },
              "fixedrange": true,
              "anchor": "x",
              "overlaying": "y",
              "side": "right"
            },
            "barmode": "stack",
            "showlegend": false,
            "plot_bgcolor": "#FFF",
            "paper_bgcolor": "#FFF",
            "hovermode": "x unified",
            "xaxis": {
              "hoverformat": "%a %e %b %y, %H:%M",
              "range": ["2022-10-05T23:36:00+03:00", "2022-10-07T00:24:00+03:00"],
              "showgrid": false,
              "fixedrange": true,
              "dtick": 10800000
            },
            "shapes": [{
              "fillcolor": "#FFFFFF",
              "layer": "below",
              "line": {
                "width": 0
              },
              "opacity": 0.7,
              "type": "rect",
              "x0": "2022-10-05T23:36:00+03:00",
              "x1": "2022-10-07T00:24:00+03:00",
              "xref": "x",
              "y0": 4,
              "y1": 8.166666666666666,
              "yref": "y"
            }, {
              "fillcolor": "#FFFFFF",
              "layer": "below",
              "line": {
                "width": 0
              },
              "opacity": 0.7,
              "type": "rect",
              "x0": "2022-10-05T23:36:00+03:00",
              "x1": "2022-10-07T00:24:00+03:00",
              "xref": "x",
              "y0": 3.011111111111111,
              "y1": 10,
              "yref": "y"
            }, {
              "fillcolor": "#E3EDFC",
              "layer": "below",
              "line": {
                "width": 0
              },
              "opacity": 0.5,
              "type": "rect",
              "x0": "2022-10-05T23:36:00+03:00",
              "x1": "2022-10-07T00:24:00+03:00",
              "xref": "x",
              "y0": 10,
              "y1": 4,
              "yref": "y"
            }]
          }
        },
        "style": {
          "width": "100%",
          "height": "100%"
        }
      }

      Plotly.newPlot(this.$refs.plot, data.figure.data, data.figure.layout)
    },
  },
};
</script>

<template>
  <div v-if="activePatient" class="patient">
    <PatientHeader :activePatient="activePatient" />
    <div class="patient__top-cards">
      <div class="card patient__top-cards__latest-glucose">
        <h2>Latest glucose value</h2>
        <div :class="activePatient.latestGlucoseTrend">
          <p>
            <span>{{ activePatient.latestGlucoseValue }}</span><br>mg/dL
          </p>
        </div>
        <p class="gray">{{ activePatient.latestGlucoseTime }}</p>
      </div>
      <div class="card patient__top-cards__sensor-usage">
        <h2>Sensor usage</h2>
        <div>
          <div>
            <p>Days with GCM data</p>
            <p>
              <span>{{ activePatient.daysWithGcmData }}</span><br>
              9/14
            </p>
          </div>
          <div>
            <p>Avg.calibrations per day</p>
            <p>
              <span>{{ activePatient.avgCalibrationsPerDay }}</span>
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="patient__cards">
      <div class="card">
        <h2>Last 24 hrs</h2>
        <p class="date">Mon 21 Jun - Sun 27 Jun</p>
        <div>
          <div
          class="tir-graph"
          :style="{background: 'radial-gradient( circle closest-side, #fff 0, #fff 77%, transparent 77%, transparent 100%, #fff 0), conic-gradient( from 180deg, #a04cbe 0, #a04cbe ' + ((100 - activePatient.timeInRange.last24Hours) * .25) + '%, #710f95 0, #710f95 ' + ((100 - activePatient.timeInRange.last24Hours) * .5) + '%, #cce0ff 0, #cce0ff ' + ((100 - activePatient.timeInRange.last24Hours) * .5 + +activePatient.timeInRange.last24Hours) + '%, #c79a00 0, #c79a00 ' + ((100 - activePatient.timeInRange.last24Hours) * .75 + +activePatient.timeInRange.last24Hours) + '%, #ffca28 0, #ffca28 100%)'}"
          ></div>
          <div class="value">
            <h3>Time in range (TIR)</h3>
            <p>
              <span>{{ activePatient.timeInRange.last24Hours }}%</span>
              Target range:<br>
              4.0–10.0 mmol/L
            </p>
          </div>
        </div>
        <hr>
        <div>
          <img src="/steps.svg" alt="Steps icon">
          <div class="value">
            <h3>Steps</h3>
            <p>
              <span>{{ activePatient.steps.last24Hours }}</span>
              Steps in total
            </p>
          </div>
        </div>
        <hr>
        <div>
          <img v-if="activePatient.moodAverage.last24Hours === 'Positive'" src="/mood-all-good.svg" alt="Mood: Positive">
          <img v-else src="/mood-contacted.svg" alt="Mood: Negative">
          <div class="value">
            <h3>Mood</h3>
            <p>
              <span>{{ activePatient.mood.last24Hours }}%</span>
              {{ activePatient.moodAverage.last24Hours }} on average
            </p>
          </div>
        </div>
        <hr>
        <div>
          <img src="/stars-collected.svg" alt="Stars collected">
          <div class="value">
            <h3>Stars collected</h3>
            <p>
              <span>34</span>
              / 300 stars
            </p>
          </div>
        </div>
        <hr>
        <div>
          <img src="/activity-in-groups.svg" alt="Stars collected">
          <div class="value">
            <h3>Activity in groups</h3>
            <p>
              <span>43</span>
              Actions / week
            </p>
          </div>
        </div>
      </div>
      <div class="card">
        <h2>Week</h2>
        <p class="date">Mon 21 Jun - Sun 27 Jun</p>
        <div>
          <div
          class="tir-graph"
          :style="{background: 'radial-gradient( circle closest-side, #fff 0, #fff 77%, transparent 77%, transparent 100%, #fff 0), conic-gradient( from 180deg, #a04cbe 0, #a04cbe ' + ((100 - activePatient.timeInRange.week) * .25) + '%, #710f95 0, #710f95 ' + ((100 - activePatient.timeInRange.week) * .5) + '%, #cce0ff 0, #cce0ff ' + ((100 - activePatient.timeInRange.week) * .5 + +activePatient.timeInRange.week) + '%, #c79a00 0, #c79a00 ' + ((100 - activePatient.timeInRange.week) * .75 + +activePatient.timeInRange.week) + '%, #ffca28 0, #ffca28 100%)'}"
          ></div>
          <div class="value">
            <h3>Time in range (TIR)</h3>
            <p>
              <span>{{ activePatient.timeInRange.week }}%</span>
              Target range:<br>
              4.0–10.0 mmol/L
            </p>
          </div>
        </div>
        <hr>
        <div>
          <img src="/steps.svg" alt="Steps icon">
          <div class="value">
            <h3>Steps</h3>
            <p>
              <span>{{ activePatient.steps.week }}</span>
              Steps in total
            </p>
          </div>
        </div>
        <hr>
        <div>
          <img v-if="activePatient.moodAverage.week === 'Positive'" src="/mood-all-good.svg" alt="Mood: Positive">
          <img v-else src="/mood-contacted.svg" alt="Mood: Negative">
          <div class="value">
            <h3>Mood</h3>
            <p>
              <span>{{ activePatient.mood.week }}%</span>
              {{ activePatient.moodAverage.week }} on average
            </p>
          </div>
        </div>
        <hr>
        <div>
          <img src="/stars-collected.svg" alt="Stars collected">
          <div class="value">
            <h3>Stars collected</h3>
            <p>
              <span>34</span>
              / 300 stars
            </p>
          </div>
        </div>
        <hr>
        <div>
          <img src="/activity-in-groups.svg" alt="Stars collected">
          <div class="value">
            <h3>Activity in groups</h3>
            <p>
              <span>43</span>
              Actions / week
            </p>
          </div>
        </div>
      </div>
      <div class="card">
        <h2>Month</h2>
        <p class="date">Mon 21 Jun - Sun 27 Jun</p>
        <div>
          <div
          class="tir-graph"
          :style="{background: 'radial-gradient( circle closest-side, #fff 0, #fff 77%, transparent 77%, transparent 100%, #fff 0), conic-gradient( from 180deg, #a04cbe 0, #a04cbe ' + ((100 - activePatient.timeInRange.month) * .25) + '%, #710f95 0, #710f95 ' + ((100 - activePatient.timeInRange.month) * .5) + '%, #cce0ff 0, #cce0ff ' + ((100 - activePatient.timeInRange.month) * .5 + +activePatient.timeInRange.month) + '%, #c79a00 0, #c79a00 ' + ((100 - activePatient.timeInRange.month) * .75 + +activePatient.timeInRange.month) + '%, #ffca28 0, #ffca28 100%)'}"
          ></div>
          <div class="value">
            <h3>Time in range (TIR)</h3>
            <p>
              <span>{{ activePatient.timeInRange.month }}%</span>
              Target range:<br>
              4.0–10.0 mmol/L
            </p>
          </div>
        </div>
        <hr>
        <div>
          <img src="/steps.svg" alt="Steps icon">
          <div class="value">
            <h3>Steps</h3>
            <p>
              <span>{{ activePatient.steps.month }}</span>
              Steps in total
            </p>
          </div>
        </div>
        <hr>
        <div>
          <img v-if="activePatient.moodAverage.month === 'Positive'" src="/mood-all-good.svg" alt="Mood: Positive">
          <img v-else src="/mood-contacted.svg" alt="Mood: Negative">
          <div class="value">
            <h3>Mood</h3>
            <p>
              <span>{{ activePatient.mood.month }}%</span>
              {{ activePatient.moodAverage.month }} on average
            </p>
          </div>
        </div>
        <hr>
        <div>
          <img src="/stars-collected.svg" alt="Stars collected">
          <div class="value">
            <h3>Stars collected</h3>
            <p>
              <span>34</span>
              / 300 stars
            </p>
          </div>
        </div>
        <hr>
        <div>
          <img src="/activity-in-groups.svg" alt="Stars collected">
          <div class="value">
            <h3>Activity in groups</h3>
            <p>
              <span>43</span>
              Actions / week
            </p>
          </div>
        </div>
      </div>
      <div class="card">
        <h2>Year</h2>
        <p class="date">Mon 21 Jun - Sun 27 Jun</p>
        <div>
          <div
          class="tir-graph"
          :style="{background: 'radial-gradient( circle closest-side, #fff 0, #fff 77%, transparent 77%, transparent 100%, #fff 0), conic-gradient( from 180deg, #a04cbe 0, #a04cbe ' + ((100 - activePatient.timeInRange.month) * .25) + '%, #710f95 0, #710f95 ' + ((100 - activePatient.timeInRange.month) * .5) + '%, #cce0ff 0, #cce0ff ' + ((100 - activePatient.timeInRange.month) * .5 + +activePatient.timeInRange.month) + '%, #c79a00 0, #c79a00 ' + ((100 - activePatient.timeInRange.month) * .75 + +activePatient.timeInRange.month) + '%, #ffca28 0, #ffca28 100%)'}"
          ></div>
          <div class="value">
            <h3>Time in range (TIR)</h3>
            <p>
              <span>{{ activePatient.timeInRange.month }}%</span>
              Target range:<br>
              4.0–10.0 mmol/L
            </p>
          </div>
        </div>
        <hr>
        <div>
          <img src="/steps.svg" alt="Steps icon">
          <div class="value">
            <h3>Steps</h3>
            <p>
              <span>{{ activePatient.steps.month }}</span>
              Steps in total
            </p>
          </div>
        </div>
        <hr>
        <div>
          <img v-if="activePatient.moodAverage.month === 'Positive'" src="/mood-all-good.svg" alt="Mood: Positive">
          <img v-else src="/mood-contacted.svg" alt="Mood: Negative">
          <div class="value">
            <h3>Mood</h3>
            <p>
              <span>{{ activePatient.mood.month }}%</span>
              {{ activePatient.moodAverage.month }} on average
            </p>
          </div>
        </div>
        <hr>
        <div>
          <img src="/stars-collected.svg" alt="Stars collected">
          <div class="value">
            <h3>Stars collected</h3>
            <p>
              <span>34</span>
              / 300 stars
            </p>
          </div>
        </div>
        <hr>
        <div>
          <img src="/activity-in-groups.svg" alt="Stars collected">
          <div class="value">
            <h3>Activity in groups</h3>
            <p>
              <span>43</span>
              Actions / week
            </p>
          </div>
        </div>
      </div>
    </div>

    <div class="patient__overview">
      <h2>Overview</h2>
      <div>
        <div class="card patient__overview__average-glucose">
          <h3>Average glucose value</h3>
          <!-- <img src="/average-glucose.svg" alt="Average glucose value"> -->
          <div class="patient__overview__average-glucose__items">
            <div>
              <h4>Daily</h4>
              <div>
                <p><span>188</span><br>mg/dL</p>
              </div>
            </div>
            <div>
              <h4>Weekly</h4>
              <div>
                <p><span>179</span><br>mg/dL</p>
              </div>
            </div>
            <div>
              <h4>Monthly</h4>
              <div>
                <p><span>188</span><br>mg/dL</p>
              </div>
            </div>
            <div>
              <h4>Yearly</h4>
              <div>
                <p><span>179</span><br>mg/dL</p>
              </div>
            </div>
          </div>
        </div>
        <div class="card patient__overview__time-in-range">
          <h3>Weekly Time in Range</h3>
          <img src="/weekly-time-in-range.png" alt="Weekly time in range">
          <p>Week from Mon 21 Jun to Sun 27 Jun</p>
        </div>
      </div>
    </div>

    <div class="patient__timeline">
      <h2>Timeline view</h2>
      <div class="card">
        <div ref="plot"></div>
        <div class="patient__timeline__cards">
          <div>
            <h3>Short-acting insulin total</h3>
            <p><span>20 U</span><br>Long-acting: Tresiba</p>
          </div>
          <div>
            <h3>Long-acting insulin total</h3>
            <p><span>25 U</span><br>Long-acting: Tresiba</p>
          </div>
          <div>
            <h3>Time in range (TIR)</h3>
            <p><span>46%</span></p>
          </div>
          <div>
            <h3>Average glucose value</h3>
            <div class="patient__timeline__cards__average-glucose">
              <img src="/mood-all-good.svg" alt="Average glucose value: Positive">
              <p><span>12.8</span><br>mmol/L</p>
            </div>
          </div>
          <div>
            <ul>
              <li class="glucose-reading">Glucose reading</li>
              <li class="fast-acting-insulin">Fast-acting insulin</li>
              <li class="long-acting-insulin">Long-acting insulin</li>
              <li class="notifications">Notifications</li>
              <li class="calories-burned">Calories burned</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<style lang="scss" scoped>
.patient {
  display: flex;
  flex-direction: column;
  row-gap: 56px;

  .card {
    padding: 24px;
    background: var(--white);
    border-radius: 18px;
    box-shadow: 0px 1px 2px -1px rgba(0, 0, 0, 0.4);

    h2 {
      font-size: 1rem;
      line-height: 1.5;
      font-weight: 700;
      font-family: var(--font-body);
    }
  }

  &__top-cards {
    display: grid;
    grid-template-columns: 1fr 2fr 1fr;
    gap: 8px;

    &__latest-glucose {
      display: flex;
      flex-direction: column;

      h2 {
        margin-bottom: 24px;
      }

      div {
        display: flex;
        // align-items: center;
        gap: 8px;

        &::after {
          content: "";
          display: block;
          width: 24px;
          height: 24px;
          background: url(/icon-arrow.svg) 50% 50% no-repeat var(--blue-tint);
          border-radius: 100%;
          transform: rotate(45deg);
        }

        &.up::after {
          background-color: var(--yellow);
          transform: rotate(0);
        }

        &.down::after {
          background-color: var(--purple);
          transform: rotate(90deg);
        }

        p {
          margin: 0;
          font-size: 12px;

          span {
            font-size: 34px;
            line-height: 1.05;
            font-family: var(--font-heading);
          }
        }
      }

      .gray {
        margin: auto 0 0;
        font-size: 12px;
        color: #A6A6A6;
      }
    }

    &__sensor-usage {
      > div {
        display: grid;
        grid-template-columns: 1fr 1fr;

        > div {
          display: flex;
          flex-direction: column;
          justify-content: space-between;

          &:first-child {
            padding-right: 24px;
            border-right: 1px solid #D9D9D9;
          }

          &:nth-child(2) {
            padding-left: 24px;
          }
        }

        p {
          margin-bottom: 0;
          font-size: 12px;
          color: #404040;

          &:first-child {
            margin-bottom: 24px;
          }

          span {
            font-size: 2rem;
            line-height: 1.1;
            font-weight: 500;
            font-family: var(--font-heading);
            color: var(--black);
          }
        }
      }
    }
  }

  &__cards {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;

    .date {
      margin-bottom: 8px;
      font-size: 12px;
      color: #A6A6A6;
    }

    > div {
      > div {
        display: grid;
        grid-template-columns: 60px 1fr;
        align-items: center;
        gap: 56px;
        padding: 20px 0;

        .tir-graph {
          width: 60px;
          height: 60px;
          border-radius: 100%;
        }

        img {
          width: 60px;
          height: 60px;
        }

        p {
          margin: 0;
          font-size: 12px;
          color: #404040;
          // color: var(--gray);

          span {
            display: block;
            font-size: 34px;
            line-height: 1.05;
            color: var(--black);
            font-family: var(--font-heading);
          }
        }
      }
    }

    h2 {
      margin-bottom: 8px;
    }

    h3 {
      margin-bottom: 8px;
      font-size: 14px;
      line-height: 1.5;
      font-weight: 600;
      font-family: var(--font-body);
    }

    hr {
      // margin: 20px 0;
      margin: 0;
      border: 0;
      border-top: 1px solid #D9D9D9;
    }
  }

  &__overview,
  &__timeline {
    h2 {
      margin-bottom: 24px;
      font-size: 18px;
      font-family: var(--font-body);
      font-weight: 700;
      letter-spacing: -0.014em;
    }
  }

  &__overview {
    > div {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
    }

    h3 {
      margin-bottom: 24px;
      font-size: 1rem;
      line-height: 1.5;
      // letter-spacing: -0.0014em;
      font-weight: 700;
      font-family: var(--font-body);
    }

    &__average-glucose {
      justify-content: space-between;

      &__items {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 40px 24px;

        > div {
          justify-content: space-between;
          width: 50%;

          h4 {
            margin-bottom: 24px;
            font-size: 14px;
            font-weight: 600;
            font-family: var(--font-body);
          }

          &:nth-child(even) {
            padding-left: 24px;
            border-left: 1px solid #D9D9D9;
          }

          > div {
            display: flex;
            align-items: center;
            gap: 24px;

            p {
              margin: 0;
              font-size: 12px;

              span {
                font-size: 34px;
                line-height: 1.05;
                font-family: var(--font-heading);
              }
            }

            &::before {
              content: "";
              display: block;
              min-width: 60px;
              height: 60px;
              background: url(/mood-all-good.svg) 50% 50% no-repeat;
              background-size: cover;
              border-radius: 100%;
            }
          }
        }
      }
    }

    &__time-in-range {
      p {
        margin: 0;
        font-size: 12px;
        color: #A6A6A6;
      }
    }
  }

  &__timeline {
    &__cards {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      margin-left: -24px;
      margin-right: -24px;
      padding-top: 24px;

      > div {
        padding: 24px;

        // &:first-child {
        //   padding-left: 0;
        // }

        &:not(:first-child) {
          border-left: 1px solid #D9D9D9;
        }
      }

      h3 {
        margin-bottom: 24px;
        font-size: 14px;
        font-weight: 600;
        font-family: var(--font-body);
      }

      p {
        font-size: 12px;
        color: #404040;

        > span {
          font-size: 2rem;
          line-height: 1.1;
          font-weight: 500;
          font-family: var(--font-heading);
          color: var(--black);
        }
      }

      &__average-glucose {
        display: flex;
        align-items: center;
        gap: 24px;

        img {
          width: 60px;
          height: 60px;
        }

        p {
          margin: 0;
          font-size: 12px;

          span {
            font-size: 34px;
            line-height: 1.05;
            font-family: var(--font-heading);
          }
        }
      }

      ul {
        list-style: none;
        display: flex;
        flex-direction: column;
        gap: 4px;
        margin: 0;
        padding: 0;
        font-size: 14px;

        li {
          display: flex;
          align-items: center;
          gap: 4px 12px;

          &::before {
            content: "";
            display: block;
            width: 10px;
            height: 10px;
            border-radius: 100%;
            background-color: currentColor;
            border: 2px solid currentColor;
          }

          &.glucose-reading::before {
            color: var(--blue);
          }
          &.fast-acting-insulin::before {
            color: var(--green);
          }
          &.long-acting-insulin::before {
            color: var(--red);
          }
          &.notifications::before {
            color: var(--black);
            background-color: transparent;
          }
          &.calories-burned::before {
            color: #CDE0FD;
            border-radius: 0;
          }
        }
      }
    }
  }
}
</style>